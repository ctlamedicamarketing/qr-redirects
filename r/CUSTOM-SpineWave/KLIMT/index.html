<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KLIMT • Video + PDF Downloads</title>
<meta name="robots" content="noindex, nofollow" />
<style>
  :root{
    --bg:#0b0c10; --panel:#0d111a; --ink:#e8eaed; --muted:#9aa0a6;
    --stroke:#1e2330; --accent:#ffc81a;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);
            font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial}
  a{color:var(--ink)}
  .wrap{min-height:100%;display:grid;grid-template-rows:auto 1fr auto;gap:16px;max-width:1200px;margin:0 auto;padding:16px}
  header.app{display:flex;gap:10px;align-items:center;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid var(--stroke)}
  header.app h1{margin:0;font-size:18px;font-weight:700;letter-spacing:.02em}
  .nav{display:flex;gap:8px}
  .btn{appearance:none;border:1px solid var(--stroke);background:linear-gradient(180deg,#0f1320,#0b0f1b);
       color:var(--ink);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;text-decoration:none}
  .btn:hover{border-color:var(--accent)}
  .grid{display:grid;grid-template-columns:1fr 1.4fr;gap:16px}
  @media (max-width:980px){.grid{grid-template-columns:1fr}}
  .card{background:var(--panel);border:1px solid var(--stroke);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
  .card .head{display:flex;align-items:center;gap:10px;justify-content:space-between;padding:12px;border-bottom:1px solid var(--stroke)}
  .card .head h2{margin:0;font-size:14px;font-weight:700}
  .frame{position:relative;aspect-ratio:16/9;width:100%;background:#000}
  .frame > iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
  .bar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;padding:10px 12px;border-top:1px solid var(--stroke)}
  .pill{display:inline-flex;gap:8px;align-items:center;border:1px solid var(--stroke);background:#0f1320;border-radius:999px;padding:6px 10px}
  .muted{color:var(--muted)}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .chips{display:flex;flex-wrap:wrap;gap:8px;padding:10px 12px}
  .chip{border:1px solid var(--stroke);background:#0f1320;border-radius:999px;padding:6px 10px;cursor:pointer;text-decoration:none}
  .chip:hover{border-color:var(--accent)}
  .list{padding:12px; display:grid; gap:12px}
  .item{display:flex;align-items:center;gap:12px;flex-wrap:wrap;border:1px solid var(--stroke);border-radius:12px;padding:10px}
  .item h3{margin:0;font-size:14px}
  details.debug{padding:8px 12px;border-top:1px dashed var(--stroke);font-size:12px;color:var(--muted)}
  footer{display:flex;justify-content:space-between;gap:10px;align-items:center;padding-top:8px;border-top:1px solid var(--stroke)}
</style>
</head>
<body>
<div class="wrap">

  <!-- Top -->
  <header class="app">
    <h1>KLIMT — Video & PDF Downloads</h1>
    <nav class="nav">
      <a class="btn" href="../">Home</a>
      <a class="btn" href="https://ctlamedica.com" target="_blank" rel="noopener">CTL Amedica</a>
    </nav>
  </header>

  <!-- Main -->
  <div class="grid">

    <!-- Left: YouTube -->
    <section class="card" aria-label="Video">
      <div class="head"><h2>Product Teaser</h2></div>
      <div class="frame">
        <iframe id="yt" title="YouTube video" allow="autoplay; encrypted-media; picture-in-picture; web-share"
                allowfullscreen loading="lazy" referrerpolicy="strict-origin-when-cross-origin"></iframe>
      </div>
      <div class="bar">
        <div class="row">
          <button id="playBtn" class="btn" type="button">Play</button>
          <button id="pauseBtn" class="btn" type="button">Pause</button>
        </div>
        <span class="muted">Tip: loop is enabled via <code>loop=1&playlist=VIDEO_ID</code></span>
      </div>
    </section>

    <!-- Right: PDFs (button links, no viewer) -->
    <section class="card" aria-label="Documents">
      <div class="head">
        <h2>Documents</h2>
        <!-- OPTIONAL: if you upload a ZIP with all PDFs, set href below -->
        <a id="openAllZip" class="btn muted" style="display:none" target="_blank" rel="noopener">Download All (ZIP)</a>
      </div>

      <!-- Optional quick chips linking directly to PDFs -->
      <div class="chips" id="chips"></div>

      <!-- Button list -->
      <div class="bar">
        <span class="muted">Click a document to open in a new tab, or use “Download” to save it.</span>
      </div>
      <div id="docList" class="list" aria-live="polite"></div>

      <details class="debug" id="debug">
        <summary>Debug links</summary>
        <div id="debugBody">Ready.</div>
      </details>
    </section>
  </div>

  <!-- Bottom -->
  <footer>
    <div class="muted">Files are served directly; no embedded viewer required.</div>
    <div class="row">
      <a class="btn" href="../">Home</a>
      <a class="btn" href="https://ctlamedica.com" target="_blank" rel="noopener">CTL Amedica</a>
    </div>
  </footer>
</div>

<script>
  /* ========================== CONFIG — EDIT THESE ==========================
   *
   * 1) YOUTUBE VIDEO
   *    - Replace YT_ID with the 11-character ID from your video URL.
   *      Ex: https://www.youtube.com/watch?v=cLHOGWiA6YQ -> "cLHOGWiA6YQ"
   *
   * 2) PDF LOCATIONS (DOCS array)
   *    Choose ONE of these styles per 'path':
   *      a) Relative (PDFs live next to this HTML or in a subfolder):
   *           "KLIMT-STG.pdf"            or "docs/KLIMT-STG.pdf"
   *      b) Site-root (GitHub Pages):
   *           "/qr-redirects/docs/KLIMT-STG.pdf"
   *      c) Raw GitHub (direct file in repo, not Pages):
   *           "https://raw.githubusercontent.com/<user>/<repo>/<branch>/<path/to/file.pdf>"
   *
   *    NOTE: Filenames on GitHub Pages are case-sensitive.
   *
   * 3) OPTIONAL "DOWNLOAD ALL (ZIP)"
   *    - If you upload a bundle ZIP, set ZIP_ALL to its URL and the button will appear.
   *      Ex (Pages): "/qr-redirects/docs/klimt-all.zip"
   *      Ex (raw GitHub): "https://raw.githubusercontent.com/.../klimt-all.zip"
   * ======================================================================= */

  // 1) YOUTUBE — EDIT
  const YT_ID = "cLHOGWiA6YQ";

  // 2) DOCS — EDIT labels + paths
  const DOCS = [
    { key:"klimt-stg",                      label:"KLIMT STG",                    path:"KLIMT-STG.pdf" },
    { key:"klimt-expansion-table-and-tips", label:"Klimt Expansion Table & Tips", path:"Klimt-Expansion-table-and-Tips.pdf" },
    { key:"klimt-expansion-table",          label:"Klimt Expansion Table",        path:"Klimt-Expansion-table.pdf" }
    // Add more like:
    // { key:"brochure", label:"KLIMT Brochure", path:"/qr-redirects/docs/klimt-brochure.pdf" },
    // { key:"specs",    label:"KLIMT Specs",    path:"https://raw.githubusercontent.com/<user>/<repo>/<branch>/docs/specs.pdf" }
  ];

  // 3) OPTIONAL ZIP — EDIT (or leave as null to hide the button)
  const ZIP_ALL = null; // e.g., "/qr-redirects/docs/klimt-all.zip"

  // Optional: keep old deep links working if you’ve used hash routes before
  const ALIASES = { "klimt-training":"klimt-stg", "klimt-stg-367003-0904":"klimt-stg" };
  const DEFAULT_KEY = "klimt-stg";

  /* ============================ END CONFIG ============================ */

  // --------- YouTube (unchanged embedding) ----------
  (function initYouTube(){
    const yt = document.getElementById('yt');
    const origin = location.origin;
    const params = new URLSearchParams({
      autoplay:'1', mute:'1', controls:'1', modestbranding:'1', rel:'0',
      playsinline:'1', loop:'1', playlist:YT_ID, enablejsapi:'1', origin
    });
    yt.src = `https://www.youtube.com/embed/${YT_ID}?` + params.toString();
    const post = (func)=> yt.contentWindow?.postMessage(JSON.stringify({event:'command', func}),'*');
    document.getElementById('playBtn').addEventListener('click', ()=>post('playVideo'));
    document.getElementById('pauseBtn').addEventListener('click',()=>post('pauseVideo'));
  })();

  // --------- Helpers ----------
  function absUrl(p){
    // new URL handles absolute URLs and resolves relative ones against the current page
    try { return new URL(p, location.href).toString(); }
    catch { return p; }
  }

  async function headOk(url){
    try{
      const res = await fetch(url, {method:'HEAD', cache:'no-store'});
      return res.ok;
    }catch{ return false; }
  }

  // --------- Build UI ----------
  const els = {
    chips:     document.getElementById("chips"),
    docList:   document.getElementById("docList"),
    debugBody: document.getElementById("debugBody"),
    openAll:   document.getElementById("openAllZip")
  };

  // Show/hide "Download All" button
  (function initZip(){
    if (ZIP_ALL) {
      els.openAll.href = absUrl(ZIP_ALL);
      els.openAll.style.display = "";
    }
  })();

  function addDocRow(d, url){
    const row = document.createElement("div");
    row.className = "item";

    const title = document.createElement("h3");
    title.textContent = d.label;

    const open = document.createElement("a");
    open.className = "btn";
    open.textContent = "Open";
    open.href = url;
    open.target = "_blank";
    open.rel = "noopener";

    const download = document.createElement("a");
    download.className = "btn";
    download.textContent = "Download";
    download.href = url;
    // download attr: browsers may ignore on cross-origin, but will still save on same-origin/Pages
    download.setAttribute("download", d.label.replace(/\s+/g, "_") + ".pdf");

    row.appendChild(title);
    row.appendChild(open);
    row.appendChild(download);
    els.docList.appendChild(row);
  }

  async function populateDocs(){
    for (const d of DOCS){
      const url = absUrl(d.path);

      // Chip shortcut
      const chip = document.createElement("a");
      chip.className = "chip";
      chip.textContent = d.label;
      chip.href = url;
      chip.target = "_blank";
      chip.rel = "noopener";
      els.chips.appendChild(chip);

      // Buttons row
      addDocRow(d, url);

      // Debug line
      const p = document.createElement("p");
      const ok = await headOk(url);
      p.innerHTML = `• <b>${d.label}</b>: <a href="${url}" target="_blank" rel="noopener">${url}</a> ${ok ? "✅" : "❌ (HEAD failed)"}`;
      els.debugBody.appendChild(p);
    }
  }

  // Optional: read hash (?doc=key) for deep links, but we don't need it for downloads
  function getHash(name, fallback){
    const params = new URLSearchParams(location.hash.slice(1));
    return params.get(name) ?? fallback;
  }
  (function applyAlias(){
    const raw = decodeURIComponent(getHash("doc", DEFAULT_KEY));
    const key = ALIASES[raw] || raw;
    // No UI switching needed—aliases exist to keep old links alive
    void key; // no-op: here for future expansion
  })();

  populateDocs();
</script>
</body>
</html>

