<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KLIMT • Video + Docs (Image Mode)</title>
<meta name="robots" content="noindex, nofollow" />
<style>
  :root{ --bg:#0b0c10; --panel:#0d111a; --ink:#e8eaed; --muted:#9aa0a6;
         --stroke:#1e2330; --accent:#ffc81a; }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);
            font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial}
  a{color:var(--ink)}
  .wrap{min-height:100%;display:grid;grid-template-rows:auto 1fr auto;gap:16px;
        max-width:1200px;margin:0 auto;padding:16px}
  header.app{display:flex;gap:10px;align-items:center;justify-content:space-between;
             padding-bottom:8px;border-bottom:1px solid var(--stroke)}
  header.app h1{margin:0;font-size:18px;font-weight:700;letter-spacing:.02em}
  .btn{appearance:none;border:1px solid var(--stroke);
       background:linear-gradient(180deg,#0f1320,#0b0f1b); color:var(--ink);
       padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;text-decoration:none}
  .btn:hover{border-color:var(--accent)}
  .grid{display:grid;grid-template-columns:1fr 1.4fr;gap:16px}
  @media (max-width:980px){.grid{grid-template-columns:1fr}}
  .card{background:var(--panel);border:1px solid var(--stroke);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
  .head{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px;border-bottom:1px solid var(--stroke)}
  .head h2{margin:0;font-size:14px;font-weight:700}
  .frame{position:relative;aspect-ratio:16/9;width:100%;background:#000}
  .frame > iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
  .bar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;padding:10px 12px;border-top:1px solid var(--stroke)}
  .pill{display:inline-flex;gap:8px;align-items:center;border:1px solid var(--stroke);
        background:#0f1320;border-radius:999px;padding:6px 10px}
  select,input[type="number"],input[type="range"]{background:#0f1320;color:var(--ink);
        border:1px solid var(--stroke);border-radius:8px;padding:7px 10px}
  .chips{display:flex;flex-wrap:wrap;gap:8px;padding:10px 12px}
  .chip{border:1px solid var(--stroke);background:#0f1320;border-radius:999px;padding:6px 10px;cursor:pointer}
  .chip.active,.chip:hover{border-color:var(--accent)}
  .stage{display:flex;align-items:center;justify-content:center;background:#0a0d14;min-height:420px}
  #pageImg{max-width:100%;max-height:80vh;object-fit:contain;image-rendering:auto;transform-origin:50% 50%}
  footer{display:flex;justify-content:space-between;gap:10px;align-items:center;padding-top:8px;border-top:1px solid var(--stroke);color:var(--muted)}
</style>
</head>
<body>
<div class="wrap">
  <header class="app">
    <h1>KLIMT — Video & Documents</h1>
    <nav>
      <a class="btn" href="../">Home</a>
      <a class="btn" href="https://ctlamedica.com" target="_blank" rel="noopener">CTL Amedica</a>
    </nav>
  </header>

  <div class="grid">
    <!-- Left: YouTube -->
    <section class="card">
      <div class="head"><h2>Product Teaser</h2></div>
      <div class="frame">
        <iframe id="yt" title="YouTube" allow="autoplay; encrypted-media; picture-in-picture; web-share"
                allowfullscreen loading="lazy" referrerpolicy="strict-origin-when-cross-origin"></iframe>
      </div>
      <div class="bar">
        <button id="playBtn" class="btn">Play</button>
        <button id="pauseBtn" class="btn">Pause</button>
        <span style="color:#9aa0a6">Loops via <code>loop=1&playlist=VIDEO_ID</code></span>
      </div>
    </section>

    <!-- Right: Image viewer -->
    <section class="card">
      <div class="head">
        <h2 id="docTitle">Document</h2>
        <div class="pill"><a id="openPdf" class="btn" target="_blank" rel="noopener">Open PDF</a></div>
      </div>

      <div class="chips" id="chips"></div>

      <div class="bar">
        <label class="pill">
          <span>Document</span>
          <select id="docSelect" aria-label="Choose document"></select>
        </label>
        <label class="pill">
          <span>Page</span>
          <input id="pageInput" type="number" min="1" step="1" value="1" style="width:80px" />
          <button id="goBtn" class="btn">Go</button>
        </label>
        <button id="prevBtn" class="btn">◀ Prev</button>
        <button id="nextBtn" class="btn">Next ▶</button>
        <label class="pill" title="Zoom">
          <span>Zoom</span>
          <input id="zoom" type="range" min="50" max="200" value="100" />
        </label>
      </div>

      <div class="stage">
        <img id="pageImg" alt="Document page" />
      </div>
    </section>
  </div>

  <footer>
    <span>Image Mode = no PDF viewer, ultra-compatible.</span>
    <div>
      <a class="btn" href="../">Home</a>
      <a class="btn" href="https://ctlamedica.com" target="_blank" rel="noopener">CTL Amedica</a>
    </div>
  </footer>
</div>

<script>
/* === CONFIG === */
const YT_ID = "cLHOGWiA6YQ";

/* Documents: update pages & folders after export */
const DOCS = [
  { key:"klimt-stg",  label:"KLIMT STG",                    pdf:"KLIMT-STG.pdf",                 dir:"img/klimt-stg",             pages: 12, ext:"png" },
  { key:"tips",       label:"Klimt Expansion Table & Tips", pdf:"Klimt-Expansion-table-and-Tips.pdf", dir:"img/klimt-expansion-tips",  pages: 6,  ext:"png" },
  { key:"table",      label:"Klimt Expansion Table",        pdf:"Klimt-Expansion-table.pdf",     dir:"img/klimt-expansion-table", pages: 4,  ext:"png" }
];
const DEFAULT_KEY = "table";
/* ============== */

/* YouTube */
(function initYouTube(){
  const yt = document.getElementById('yt');
  const params = new URLSearchParams({
    autoplay:'1', mute:'1', controls:'1', modestbranding:'1', rel:'0',
    playsinline:'1', loop:'1', playlist:YT_ID, enablejsapi:'1', origin: location.origin
  });
  yt.src = `https://www.youtube.com/embed/${YT_ID}?` + params.toString();
  const post = f => yt.contentWindow?.postMessage(JSON.stringify({event:'command', func:f}), '*');
  document.getElementById('playBtn').onclick  = ()=>post('playVideo');
  document.getElementById('pauseBtn').onclick = ()=>post('pauseVideo');
})();

/* Image viewer */
const els = {
  img: document.getElementById('pageImg'),
  title: document.getElementById('docTitle'),
  openPdf: document.getElementById('openPdf'),
  chips: document.getElementById('chips'),
  select: document.getElementById('docSelect'),
  pageInput: document.getElementById('pageInput'),
  prev: document.getElementById('prevBtn'),
  next: document.getElementById('nextBtn'),
  go:   document.getElementById('goBtn'),
  zoom: document.getElementById('zoom'),
};

let docKey = DEFAULT_KEY;
let page = 1;

function pad(n){ return String(n).padStart(3,'0'); }
function resolveDoc(k){ return DOCS.find(d=>d.key===k) || DOCS[0]; }

function setHash(k, p){
  const u = new URL(location);
  u.hash = `doc=${encodeURIComponent(k)}&page=${p}`;
  history.replaceState(null,'',u);
}

function render(){
  const d = resolveDoc(docKey);
  page = Math.max(1, Math.min(d.pages, page));
  els.title.textContent = d.label;
  els.select.value = d.key;
  els.pageInput.value = String(page);
  els.openPdf.href = d.pdf;

  // Build image URL: dir/page-XXX.ext
  els.img.style.transform = `scale(${els.zoom.value/100})`;
  els.img.src = `${d.dir}/page-${pad(page)}.${d.ext}`;

  // Preload neighbors for snappy paging
  [page-1, page+1].forEach(p=>{
    if (p>=1 && p<=d.pages){
      const pre = new Image();
      pre.src = `${d.dir}/page-${pad(p)}.${d.ext}`;
    }
  });

  // chips active state
  [...els.chips.children].forEach(n=>n.classList.toggle('active', n.dataset.key===d.key));

  setHash(d.key, page);
}

function populateUI(){
  DOCS.forEach(d=>{
    const opt = document.createElement('option');
    opt.value = d.key; opt.textContent = d.label;
    els.select.appendChild(opt);

    const chip = document.createElement('button');
    chip.className = 'chip';
    chip.textContent = d.label;
    chip.dataset.key = d.key;
    chip.onclick = ()=>{ docKey = d.key; page = 1; render(); };
    els.chips.appendChild(chip);
  });
}

function parseHash(){
  const h = new URLSearchParams(location.hash.slice(1));
  docKey = decodeURIComponent(h.get('doc')||DEFAULT_KEY);
  page = parseInt(h.get('page')||'1',10)||1;
}

populateUI();
parseHash();
render();

/* Controls */
els.select.onchange = e => { docKey = e.target.value; page = 1; render(); };
els.prev.onclick = ()=>{ page--; render(); };
els.next.onclick = ()=>{ page++; render(); };
els.go.onclick   = ()=>{ page = parseInt(els.pageInput.value||'1',10)||1; render(); };
els.zoom.oninput = ()=>{ els.img.style.transform = `scale(${els.zoom.value/100})`; };

// Keyboard arrows
addEventListener('keydown', e=>{
  if (e.key==='ArrowLeft'){ page--; render(); }
  if (e.key==='ArrowRight'){ page++; render(); }
});
</script>
</body>
</html>
